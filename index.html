<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Painel Executivo de Projetos Estratégicos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="login-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h1 id="login-title">Painel Executivo</h1>
                <p id="login-subtitle">Projetos Estratégicos</p>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" placeholder="seu@email.com" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" placeholder="••••••••" required>
                </div>
                <button type="submit" class="btn-login">
                    <span>Entrar</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <div id="login-error" class="login-error"></div>
            </form>
            <div class="login-footer">
                <button id="forgot-password-btn" class="btn-link">Esqueci a senha</button>
            </div>
        </div>
    </div>

    <!-- Modal de Recuperação de Senha -->
    <div id="forgot-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Recuperar Senha</h2>
                <button class="modal-close" data-modal="forgot-modal"><i class="fas fa-times"></i></button>
            </div>
            <form id="forgot-form">
                <div class="form-group">
                    <label for="forgot-email">E-mail</label>
                    <input type="email" id="forgot-email" placeholder="seu@email.com" required>
                </div>
                <button type="submit" class="btn-primary">Enviar Link de Recuperação</button>
                <div id="forgot-message" class="login-error"></div>
            </form>
        </div>
    </div>

    <!-- Painel Principal -->
    <div id="app-container" class="container hidden">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 id="sidebar-title">Painel Executivo</h2>
                <p id="sidebar-subtitle">Projetos Estratégicos</p>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <span id="user-email"></span>
                    <div class="user-actions">
                        <button id="settings-btn" class="btn-settings" title="Configurações">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button id="logout-btn" class="btn-logout" title="Sair">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div class="summary-cards">
                <div class="card">
                    <div class="card-icon"><i class="fas fa-tasks"></i></div>
                    <div class="card-content">
                        <h3 id="total-projects">0</h3>
                        <p>Projetos Totais</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon ongoing"><i class="fas fa-cogs"></i></div>
                    <div class="card-content">
                        <h3 id="ongoing-projects">0</h3>
                        <p>Em Andamento</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon completed"><i class="fas fa-check-circle"></i></div>
                    <div class="card-content">
                        <h3 id="completed-projects">0</h3>
                        <p>Concluídos</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-icon planned"><i class="fas fa-flag"></i></div>
                    <div class="card-content">
                        <h3 id="planned-projects">0</h3>
                        <p>Planejados</p>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <h3>Status dos Projetos</h3>
                <canvas id="status-chart"></canvas>
            </div>

            <div class="kpi-container">
                <h3>Indicadores Chave (KPIs)</h3>
                <div class="kpi">
                    <p>Progresso Médio</p>
                    <div class="progress-bar-background">
                        <div class="progress-bar-foreground" id="avg-progress-bar"></div>
                    </div>
                    <span id="avg-progress-text">0%</span>
                </div>
                <div class="kpi">
                    <p>Prazos Vencidos</p>
                    <span id="overdue-deadlines" class="kpi-value danger">0</span>
                </div>
                <div class="kpi">
                    <p>Próximos Prazos (7 dias)</p>
                    <span id="upcoming-deadlines" class="kpi-value warning">0</span>
                </div>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <h1 id="main-title">Visão Geral dos Projetos</h1>
                <div class="header-actions">
                    <div class="filters">
                        <label for="status-filter">Filtrar:</label>
                        <select id="status-filter">
                            <option value="todos">Todos</option>
                            <option value="Em andamento">Em Andamento</option>
                            <option value="Planejado">Planejado</option>
                            <option value="Concluído">Concluído</option>
                            <option value="Não iniciado">Não Iniciado</option>
                            <option value="Suspenso">Suspenso</option>
                        </select>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="add-project-btn" class="btn-action btn-add">
                            <i class="fas fa-plus"></i> Novo Projeto
                        </button>

                        <button id="open-tasks-btn" class="btn-action btn-tasks">
                            <i class="fas fa-list-check"></i> Próximos Passos
                            <span id="tasks-count" class="badge">0</span>
                        </button>

                        <button id="open-reminders-btn" class="btn-action btn-reminders">
                            <i class="fas fa-bell"></i> Lembretes
                            <span id="reminders-count" class="badge">0</span>
                        </button>
                        
                        <div class="dropdown">
                            <button class="btn-action btn-export dropdown-toggle">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                            <div class="dropdown-menu">
                                <button id="export-xlsx" class="dropdown-item">
                                    <i class="fas fa-file-excel"></i> Excel (.xlsx)
                                </button>
                                <button id="export-csv" class="dropdown-item">
                                    <i class="fas fa-file-csv"></i> CSV
                                </button>
                                <button id="export-pdf" class="dropdown-item">
                                    <i class="fas fa-file-pdf"></i> PDF Simples
                                </button>
                                <button id="export-report" class="dropdown-item">
                                    <i class="fas fa-file-alt"></i> Relatório Executivo
                                </button>
                            </div>
                        </div>

                        <div class="dropdown">
                            <button class="btn-action btn-import dropdown-toggle">
                                <i class="fas fa-upload"></i> Importar
                            </button>
                            <div class="dropdown-menu">
                                <button id="import-xlsx" class="dropdown-item">
                                    <i class="fas fa-file-excel"></i> Excel (.xlsx)
                                </button>
                                <button id="import-csv" class="dropdown-item">
                                    <i class="fas fa-file-csv"></i> CSV
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="table-container">
                <table id="projects-table">
                    <thead>
                        <tr>
                            <th>Nº</th>
                            <th>Nome do Projeto</th>
                            <th>Próximos Passos</th>
                            <th>Status</th>
                            <th>Progresso</th>
                            <th>Prazo</th>
                            <th>Anexos</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="projects-table-body">
                    </tbody>
                </table>
            </div>

            <div class="comments-section">
                <h2>Mural de Comentários e Anotações</h2>
                <textarea id="comment-input" placeholder="Digite um novo comentário ou anotação..."></textarea>
                <button id="add-comment-btn" class="btn-action">
                    <i class="fas fa-comment"></i> Adicionar Comentário
                </button>
                <div id="comments-list"></div>
            </div>
        </main>
    </div>

    <!-- Modal de Projeto (Adicionar/Editar) -->
    <div id="project-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modal-title">Novo Projeto</h2>
                <button class="modal-close" data-modal="project-modal"><i class="fas fa-times"></i></button>
            </div>
            <form id="project-form">
                <input type="hidden" id="project-id">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="project-name">Nome do Projeto *</label>
                        <input type="text" id="project-name" required>
                    </div>
                    <div class="form-group">
                        <label for="project-status">Status *</label>
                        <select id="project-status" required>
                            <option value="Não iniciado">Não Iniciado</option>
                            <option value="Planejado">Planejado</option>
                            <option value="Em andamento">Em Andamento</option>
                            <option value="Concluído">Concluído</option>
                            <option value="Suspenso">Suspenso</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="project-progress">Progresso (%) *</label>
                        <input type="number" id="project-progress" min="0" max="100" value="0" required>
                    </div>
                    <div class="form-group">
                        <label for="project-deadline">Prazo</label>
                        <input type="date" id="project-deadline">
                    </div>
                </div>

                <div class="form-group">
                    <label for="project-description">Descrição</label>
                    <textarea id="project-description" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="project-objective">Objetivo</label>
                    <textarea id="project-objective" rows="2"></textarea>
                </div>

                <div class="form-group">
                    <label for="project-responsible">Responsável</label>
                    <input type="text" id="project-responsible">
                </div>

                <div class="form-group">
                    <label>Próximos Passos</label>
                    <div id="next-steps-container">
                        <div class="next-step-item">
                            <input type="text" class="next-step-input" placeholder="Descreva o próximo passo">
                            <button type="button" class="btn-remove-step"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <button type="button" id="add-step-btn" class="btn-add-step">
                        <i class="fas fa-plus"></i> Adicionar Passo
                    </button>
                </div>

                <div class="form-section">
                    <h3>Análise SWOT</h3>
                    <div class="swot-grid">
                        <div class="form-group">
                            <label for="swot-strengths">Forças</label>
                            <textarea id="swot-strengths" rows="2" placeholder="Pontos fortes do projeto"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="swot-weaknesses">Fraquezas</label>
                            <textarea id="swot-weaknesses" rows="2" placeholder="Pontos fracos do projeto"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="swot-opportunities">Oportunidades</label>
                            <textarea id="swot-opportunities" rows="2" placeholder="Oportunidades identificadas"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="swot-threats">Ameaças</label>
                            <textarea id="swot-threats" rows="2" placeholder="Ameaças identificadas"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Metas</label>
                    <div id="goals-container">
                        <div class="goal-item">
                            <input type="text" class="goal-input" placeholder="Descreva uma meta">
                            <button type="button" class="btn-remove-goal"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <button type="button" id="add-goal-btn" class="btn-add-step">
                        <i class="fas fa-plus"></i> Adicionar Meta
                    </button>
                </div>

                <div class="form-section">
                    <h3><i class="fas fa-paperclip"></i> Arquivos Anexos</h3>
                    <div class="file-upload-area" id="file-upload-area">
                        <input type="file" id="project-files" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif">
                        <div class="upload-placeholder">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Arraste arquivos aqui ou clique para selecionar</p>
                            <span>PDF, Word, Excel, Imagens (máx. 10MB cada)</span>
                        </div>
                    </div>
                    <div id="files-preview" class="files-preview"></div>
                    <div id="existing-files" class="existing-files"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="project-modal">Cancelar</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Salvar Projeto
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Detalhes do Projeto -->
    <div id="project-details-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="details-title">Detalhes do Projeto</h2>
                <button class="modal-close" data-modal="project-details-modal"><i class="fas fa-times"></i></button>
            </div>
            <div id="project-details-content">
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div id="delete-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Confirmar Exclusão</h2>
                <button class="modal-close" data-modal="delete-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir o projeto <strong id="delete-project-name"></strong>?</p>
                <p class="warning-text">Esta ação não pode ser desfeita.</p>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel" data-modal="delete-modal">Cancelar</button>
                <button id="confirm-delete-btn" class="btn-danger">
                    <i class="fas fa-trash"></i> Excluir
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Configurações -->
    <div id="settings-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Configurações do Painel</h2>
                <button class="modal-close" data-modal="settings-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="settings-tabs">
                <button class="tab-btn active" data-tab="appearance">
                    <i class="fas fa-palette"></i> Aparência
                </button>
                <button class="tab-btn" data-tab="texts">
                    <i class="fas fa-font"></i> Textos
                </button>
                <button class="tab-btn" data-tab="notifications">
                    <i class="fas fa-bell"></i> Notificações
                </button>
            </div>
            <form id="settings-form">
                <!-- Aba Aparência -->
                <div class="tab-content active" id="tab-appearance">
                    <h3>Cores do Tema</h3>
                    <div class="color-grid">
                        <div class="form-group">
                            <label for="color-primary">Cor Principal</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-primary" value="#58a6ff">
                                <input type="text" id="color-primary-hex" value="#58a6ff" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-sidebar">Cor da Barra Lateral</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-sidebar" value="#161b22">
                                <input type="text" id="color-sidebar-hex" value="#161b22" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-background">Cor de Fundo</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-background" value="#0d1117">
                                <input type="text" id="color-background-hex" value="#0d1117" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-cards">Cor dos Cards</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-cards" value="#161b22">
                                <input type="text" id="color-cards-hex" value="#161b22" maxlength="7">
                            </div>
                        </div>
                    </div>
                    
                    <h3>Cores de Status</h3>
                    <div class="color-grid">
                        <div class="form-group">
                            <label for="color-status-andamento">Em Andamento</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-status-andamento" value="#58a6ff">
                                <input type="text" id="color-status-andamento-hex" value="#58a6ff" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-status-concluido">Concluído</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-status-concluido" value="#3fb950">
                                <input type="text" id="color-status-concluido-hex" value="#3fb950" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-status-planejado">Planejado</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-status-planejado" value="#d29922">
                                <input type="text" id="color-status-planejado-hex" value="#d29922" maxlength="7">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-status-suspenso">Suspenso</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-status-suspenso" value="#f85149">
                                <input type="text" id="color-status-suspenso-hex" value="#f85149" maxlength="7">
                            </div>
                        </div>
                    </div>

                    <div class="preset-themes">
                        <h3>Temas Predefinidos</h3>
                        <div class="theme-buttons">
                            <button type="button" class="theme-btn" data-theme="dark">
                                <span class="theme-preview dark"></span> Escuro (Padrão)
                            </button>
                            <button type="button" class="theme-btn" data-theme="light">
                                <span class="theme-preview light"></span> Claro
                            </button>
                            <button type="button" class="theme-btn" data-theme="blue">
                                <span class="theme-preview blue"></span> Azul Corporativo
                            </button>
                            <button type="button" class="theme-btn" data-theme="green">
                                <span class="theme-preview green"></span> Verde Natural
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Aba Textos -->
                <div class="tab-content" id="tab-texts">
                    <h3>Títulos do Painel</h3>
                    <div class="form-group">
                        <label for="text-main-title">Título Principal</label>
                        <input type="text" id="text-main-title" value="Painel Executivo" placeholder="Ex: Painel Executivo">
                    </div>
                    <div class="form-group">
                        <label for="text-subtitle">Subtítulo</label>
                        <input type="text" id="text-subtitle" value="Projetos Estratégicos" placeholder="Ex: Projetos Estratégicos">
                    </div>
                    <div class="form-group">
                        <label for="text-page-title">Título da Página</label>
                        <input type="text" id="text-page-title" value="Visão Geral dos Projetos" placeholder="Ex: Visão Geral dos Projetos">
                    </div>

                    <h3>Labels dos Cards</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="text-card-total">Card Total</label>
                            <input type="text" id="text-card-total" value="Projetos Totais">
                        </div>
                        <div class="form-group">
                            <label for="text-card-ongoing">Card Em Andamento</label>
                            <input type="text" id="text-card-ongoing" value="Em Andamento">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="text-card-completed">Card Concluídos</label>
                            <input type="text" id="text-card-completed" value="Concluídos">
                        </div>
                        <div class="form-group">
                            <label for="text-card-planned">Card Planejados</label>
                            <input type="text" id="text-card-planned" value="Planejados">
                        </div>
                    </div>

                    <h3>Informações do Relatório</h3>
                    <div class="form-group">
                        <label for="text-org-name">Nome da Organização</label>
                        <input type="text" id="text-org-name" value="" placeholder="Ex: Comissão de Assuntos Sociais - CAS">
                    </div>
                    <div class="form-group">
                        <label for="text-report-header">Cabeçalho do Relatório</label>
                        <input type="text" id="text-report-header" value="" placeholder="Ex: Câmara Legislativa do Distrito Federal">
                    </div>
                </div>

                <!-- Aba Notificações -->
                <div class="tab-content" id="tab-notifications">
                    <h3>Configuração de E-mail</h3>
                    <p class="settings-description">Configure o serviço de e-mail para receber notificações de prazos e lembretes.</p>
                    
                    <div class="form-group">
                        <label for="notification-email">E-mail para Notificações</label>
                        <input type="email" id="notification-email" placeholder="seu@email.com">
                    </div>

                    <div class="notification-options">
                        <h4>Quando notificar:</h4>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notify-deadline-7" checked>
                            <span>7 dias antes do prazo</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notify-deadline-3" checked>
                            <span>3 dias antes do prazo</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notify-deadline-1" checked>
                            <span>1 dia antes do prazo</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notify-deadline-day">
                            <span>No dia do prazo</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="notify-overdue" checked>
                            <span>Quando o prazo vencer</span>
                        </label>
                    </div>

                    <div class="emailjs-config">
                        <h4>Configuração EmailJS (opcional)</h4>
                        <p class="settings-description">Para envio de e-mails, configure sua conta <a href="https://www.emailjs.com/" target="_blank">EmailJS</a> gratuita.</p>
                        <div class="form-group">
                            <label for="emailjs-public-key">Public Key</label>
                            <input type="text" id="emailjs-public-key" placeholder="Sua Public Key do EmailJS">
                        </div>
                        <div class="form-group">
                            <label for="emailjs-service-id">Service ID</label>
                            <input type="text" id="emailjs-service-id" placeholder="Seu Service ID">
                        </div>
                        <div class="form-group">
                            <label for="emailjs-template-id">Template ID</label>
                            <input type="text" id="emailjs-template-id" placeholder="Seu Template ID">
                        </div>
                        <button type="button" id="test-email-btn" class="btn-action">
                            <i class="fas fa-paper-plane"></i> Testar Envio
                        </button>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" id="reset-settings-btn" class="btn-cancel">
                        <i class="fas fa-undo"></i> Restaurar Padrões
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Salvar Configurações
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Lembretes -->
    <div id="reminders-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-bell"></i> Lembretes</h2>
                <button class="modal-close" data-modal="reminders-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="reminders-header">
                <button id="add-reminder-btn" class="btn-action btn-add">
                    <i class="fas fa-plus"></i> Novo Lembrete
                </button>
            </div>
            <div id="reminders-list" class="reminders-list">
                <!-- Lembretes serão inseridos aqui -->
            </div>
        </div>
    </div>

    <!-- Modal de Criar/Editar Lembrete -->
    <div id="reminder-form-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="reminder-modal-title">Novo Lembrete</h2>
                <button class="modal-close" data-modal="reminder-form-modal"><i class="fas fa-times"></i></button>
            </div>
            <form id="reminder-form">
                <input type="hidden" id="reminder-id">
                
                <div class="form-group">
                    <label for="reminder-title">Título *</label>
                    <input type="text" id="reminder-title" required placeholder="Ex: Reunião semanal">
                </div>

                <div class="form-group">
                    <label for="reminder-description">Descrição</label>
                    <textarea id="reminder-description" rows="2" placeholder="Detalhes do lembrete..."></textarea>
                </div>

                <div class="form-group">
                    <label for="reminder-project">Projeto Vinculado</label>
                    <select id="reminder-project">
                        <option value="">Nenhum (lembrete geral)</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="reminder-date">Data *</label>
                        <input type="date" id="reminder-date" required>
                    </div>
                    <div class="form-group">
                        <label for="reminder-time">Horário</label>
                        <input type="time" id="reminder-time" value="09:00">
                    </div>
                </div>

                <div class="form-group">
                    <label for="reminder-recurrence">Recorrência</label>
                    <select id="reminder-recurrence">
                        <option value="none">Não repetir</option>
                        <option value="daily">Diariamente</option>
                        <option value="weekly">Semanalmente</option>
                        <option value="biweekly">Quinzenalmente</option>
                        <option value="monthly">Mensalmente</option>
                    </select>
                </div>

                <div id="recurrence-options" class="recurrence-options hidden">
                    <div class="form-group">
                        <label for="reminder-end-date">Repetir até</label>
                        <input type="date" id="reminder-end-date">
                    </div>
                </div>

                <label class="checkbox-label">
                    <input type="checkbox" id="reminder-notify" checked>
                    <span>Enviar notificação por e-mail</span>
                </label>

                <label class="checkbox-label">
                    <input type="checkbox" id="reminder-calendar">
                    <span>Adicionar ao Google Calendar</span>
                </label>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="reminder-form-modal">Cancelar</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Salvar Lembrete
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Geração de Relatório -->
    <div id="report-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-alt"></i> Gerar Relatório Executivo</h2>
                <button class="modal-close" data-modal="report-modal"><i class="fas fa-times"></i></button>
            </div>
            <form id="report-form">
                <div class="form-group">
                    <label for="report-title">Título do Relatório</label>
                    <input type="text" id="report-title" value="Relatório Executivo de Projetos">
                </div>

                <div class="form-group">
                    <label for="report-period">Período</label>
                    <input type="text" id="report-period" placeholder="Ex: Janeiro a Março de 2025">
                </div>

                <div class="form-group">
                    <label for="report-author">Elaborado por</label>
                    <input type="text" id="report-author" placeholder="Seu nome">
                </div>

                <div class="form-group">
                    <label>Incluir no relatório:</label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="report-summary" checked>
                        <span>Resumo executivo</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="report-chart" checked>
                        <span>Gráfico de status</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="report-details" checked>
                        <span>Detalhes dos projetos</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="report-swot">
                        <span>Análise SWOT</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="report-next-steps" checked>
                        <span>Próximos passos</span>
                    </label>
                </div>

                <div class="form-group">
                    <label for="report-filter">Filtrar projetos</label>
                    <select id="report-filter">
                        <option value="todos">Todos os projetos</option>
                        <option value="Em andamento">Apenas Em Andamento</option>
                        <option value="Planejado">Apenas Planejados</option>
                        <option value="Concluído">Apenas Concluídos</option>
                    </select>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="report-modal">Cancelar</button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-file-pdf"></i> Gerar PDF
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Input oculto para importação -->
    <input type="file" id="file-input" accept=".xlsx,.xls,.csv" style="display: none;">

    <!-- Painel Lateral de Próximos Passos -->
    <div id="tasks-panel" class="tasks-panel">
        <div class="tasks-panel-header">
            <div class="tasks-header-title">
                <i class="fas fa-list-check"></i>
                <h2>Próximos Passos</h2>
            </div>
            <button id="close-tasks-panel" class="btn-close-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="tasks-panel-filters">
            <div class="tasks-filter-group">
                <label>Filtrar por projeto:</label>
                <select id="tasks-project-filter">
                    <option value="todos">Todos os projetos</option>
                </select>
            </div>
            <div class="tasks-filter-group">
                <label>Filtrar por status:</label>
                <select id="tasks-status-filter">
                    <option value="todos">Todos</option>
                    <option value="pendente">Pendentes</option>
                    <option value="agendado">Agendados</option>
                    <option value="concluido">Concluídos</option>
                </select>
            </div>
        </div>

        <div class="tasks-panel-stats">
            <div class="task-stat">
                <span class="stat-number" id="stat-total-tasks">0</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="task-stat">
                <span class="stat-number pending" id="stat-pending-tasks">0</span>
                <span class="stat-label">Pendentes</span>
            </div>
            <div class="task-stat">
                <span class="stat-number scheduled" id="stat-scheduled-tasks">0</span>
                <span class="stat-label">Agendados</span>
            </div>
            <div class="task-stat">
                <span class="stat-number completed" id="stat-completed-tasks">0</span>
                <span class="stat-label">Concluídos</span>
            </div>
        </div>

        <div class="tasks-panel-content" id="tasks-list">
        </div>

        <div class="tasks-panel-footer">
            <button id="export-tasks-calendar" class="btn-action btn-calendar-export">
                <i class="fab fa-google"></i> Exportar para Google Calendar
            </button>
        </div>
    </div>

    <!-- Overlay do painel -->
    <div id="tasks-panel-overlay" class="tasks-panel-overlay"></div>

    <!-- Modal de Agendamento -->
    <div id="schedule-modal" class="modal">
        <div class="modal-content modal-schedule">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-plus"></i> Agendar no Google Calendar</h2>
                <button class="modal-close" data-modal="schedule-modal"><i class="fas fa-times"></i></button>
            </div>
            <form id="schedule-form">
                <input type="hidden" id="schedule-task-id">
                <input type="hidden" id="schedule-project-id">
                
                <div class="schedule-task-preview">
                    <div class="preview-project">
                        <i class="fas fa-folder"></i>
                        <span id="schedule-project-name"></span>
                    </div>
                    <div class="preview-task">
                        <i class="fas fa-tasks"></i>
                        <span id="schedule-task-text"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="schedule-title">Título do Evento</label>
                    <input type="text" id="schedule-title" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="schedule-date">Data</label>
                        <input type="date" id="schedule-date" required>
                    </div>
                    <div class="form-group">
                        <label for="schedule-time">Horário</label>
                        <input type="time" id="schedule-time" value="09:00">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="schedule-duration">Duração</label>
                        <select id="schedule-duration">
                            <option value="30">30 minutos</option>
                            <option value="60" selected>1 hora</option>
                            <option value="90">1h 30min</option>
                            <option value="120">2 horas</option>
                            <option value="180">3 horas</option>
                            <option value="240">4 horas</option>
                            <option value="480">8 horas (dia inteiro)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="schedule-reminder">Lembrete</label>
                        <select id="schedule-reminder">
                            <option value="10">10 minutos antes</option>
                            <option value="30" selected>30 minutos antes</option>
                            <option value="60">1 hora antes</option>
                            <option value="1440">1 dia antes</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="schedule-description">Descrição (opcional)</label>
                    <textarea id="schedule-description" rows="3" placeholder="Detalhes adicionais sobre a tarefa..."></textarea>
                </div>

                <div class="form-group">
                    <label for="schedule-location">Local (opcional)</label>
                    <input type="text" id="schedule-location" placeholder="Ex: Sala de reuniões, Online, etc.">
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" data-modal="schedule-modal">Cancelar</button>
                    <button type="submit" class="btn-primary btn-google">
                        <i class="fab fa-google"></i> Abrir no Google Calendar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast de Notificação -->
    <div id="toast" class="toast">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="utils.js"></script>
    <script src="export.js"></script>
    <script src="import.js"></script>
    <script src="settings.js"></script>
    <script src="reminders.js"></script>
    <script src="files.js"></script>
    <script src="reports.js"></script>
    <script src="app.js"></script>
</body>
</html>
